colnames(university) <- c("col")
university <- read.csv("C:/RFiles/university.data")
colnames(university) <- c("col")
head(university)
library(tidyverse)
View(university)
str_split(university$col, "(state")
library(tidyverse)
str_split(university$col, "(state")
str_split(university$col, "state")
View(x)
x <- str_split(university$col, "state")
View(x)
ecommerce <- read.csv("C:/RFiles/data.csv")
View(ecommerce)
library(Ecdat)
install.packages("Ecdat")
library(Ecdat)
library(Ecdat)
dim(Housing)
help('plot')
?plot
?plot
?plot
help(plott)
help(plot)
plot(Speed, Distance,
panel.first = lines(stats::lowess(Speed, Distance), lty = "dashed"),
pch = 0, cex = 1.2, col = "blue")
Speed <- cars$speed
Distance <- cars$dist
plot(Speed, Distance, panel.first = grid(8, 8),
pch = 0, cex = 1.2, col = "blue")
plot(Speed, Distance,
panel.first = lines(stats::lowess(Speed, Distance), lty = "dashed"),
pch = 0, cex = 1.2, col = "blue")
?qplot
?barplot
## 3rd form of formula - 2 categories :
op <- par(mfrow = 2:1, mgp = c(3,1,0)/2, mar = .1+c(3,3:1))
summary(d.Titanic <- as.data.frame(Titanic))
barplot(Freq ~ Class + Survived, data = d.Titanic,
subset = Age == "Adult" & Sex == "Male",
main = "barplot(Freq ~ Class + Survived, *)", ylab = "# {passengers}", legend = TRUE)
# Corresponding table :
(xt <- xtabs(Freq ~ Survived + Class + Sex, d.Titanic, subset = Age=="Adult"))
# Alternatively, a mosaic plot :
mosaicplot(xt[,,"Male"], main = "mosaicplot(Freq ~ Class + Survived, *)", color=TRUE)
par(op)
housing <- read.csv("C:/RFiles/housing.csv")
ecommerce <- read.csv("C:/Rfiles/ecommerce.csv")
?hist
?boxplot
?barplot
?plot
?hit
?hist
op <- par(mfrow = c(2, 2))
hist(islands)
utils::str(hist(islands, col = "gray", labels = TRUE))
?barplot
barplot(GNP ~ Year, data = longley)
barplot(cbind(Employed, Unemployed) ~ Year, data = longley)
## 3rd form of formula - 2 categories :
op <- par(mfrow = 2:1, mgp = c(3,1,0)/2, mar = .1+c(3,3:1))
summary(d.Titanic <- as.data.frame(Titanic))
barplot(Freq ~ Class + Survived, data = d.Titanic,
subset = Age == "Adult" & Sex == "Male",
main = "barplot(Freq ~ Class + Survived, *)", ylab = "# {passengers}", legend = TRUE)
# Corresponding table :
(xt <- xtabs(Freq ~ Survived + Class + Sex, d.Titanic, subset = Age=="Adult"))
# Alternatively, a mosaic plot :
mosaicplot(xt[,,"Male"], main = "mosaicplot(Freq ~ Class + Survived, *)", color=TRUE)
par(op)
# Formula method
barplot(GNP ~ Year, data = longley)
barplot(cbind(Employed, Unemployed) ~ Year, data = longley)
## 3rd form of formula - 2 categories :
op <- par(mfrow = 2:1, mgp = c(3,1,0)/2, mar = .1+c(3,3:1))
summary(d.Titanic <- as.data.frame(Titanic))
barplot(Freq ~ Class + Survived, data = d.Titanic,
subset = Age == "Adult" & Sex == "Male",
main = "barplot(Freq ~ Class + Survived, *)", ylab = "# {passengers}", legend = TRUE)
# Corresponding table :
(xt <- xtabs(Freq ~ Survived + Class + Sex, d.Titanic, subset = Age=="Adult"))
# Alternatively, a mosaic plot :
mosaicplot(xt[,,"Male"], main = "mosaicplot(Freq ~ Class + Survived, *)", color=TRUE)
par(op)
# Formula method
barplot(GNP ~ Year, data = longley)
barplot(cbind(Employed, Unemployed) ~ Year, data = longley)
## 3rd form of formula - 2 categories :
op <- par(mfrow = 2:1, mgp = c(3,1,0)/2, mar = .1+c(3,3:1))
summary(d.Titanic <- as.data.frame(Titanic))
barplot(Freq ~ Class + Survived, data = d.Titanic,
subset = Age == "Adult" & Sex == "Male",
main = "barplot(Freq ~ Class + Survived, *)", ylab = "# {passengers}", legend = TRUE)
# Corresponding table :
(xt <- xtabs(Freq ~ Survived + Class + Sex, d.Titanic, subset = Age=="Adult"))
# Alternatively, a mosaic plot :
mosaicplot(xt[,,"Male"], main = "mosaicplot(Freq ~ Class + Survived, *)", color=TRUE)
par(op)
library(Ecdat)
head(Housing)
head(Star)
install.packages("tidyverse")
a
library(tidyverse)
data(iris)
head(iris)
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
plot(pressure)
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
plot(pressure)
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
plot(pressure)
Y
Y
data(package='Ecdat')
View(Fishing)
library(Ecdat)
View(Fishing)
View(Clothing)
View(Computers)
View(Fatality)
View(Males)
View(OFP)
View(Workinghours)
View(Wages)
head(Schooling)
source('~/GitHub/gh-advancing-into-analytics/drafts-in-progress/chapter-08-r-for-data-analysis/r-wrangling-dataviz-star.R', echo=TRUE)
head(ManufCost)
head(Fair)
head(Bwages)
head(Males)
head(Consumption)
head(Heating)
head(LaborSupply)
head(Produc)
data()
airquality
ToothGrowth
mtcars
sunspots
women
chickwts
cars
PlantGrowth
ability.cov
airmiles
attenu
# read the dataset into a data frame
abalone <- read.csv("http://archive.ics.uci.edu/ml/machine-learning-databases/abalone/abalone.data", header=FALSE)
# add column names
names(abalone) <- c("sex", "length", "diameter", "height", "weight.whole",
"weight.shucked", "weight.viscera", "weight.shell", "rings")
head(abalone)
library(rattle.data)
install.packages('rattle.data')
wine
library(rattle.data)
wine
head(abalone)
table(abalone$ringx)
table(abalone$rings)
hist(abalone$rings)
library(dplyr)
1 * 2
1 * 2 # This comment is possible
# This comment is preferred
2 * 1
# For reading in csv files
library(readr)
# For reading in Excel files
library(readxl)
# For summary statistics
library(psych)
# For reading in csv files
library(readr)
# For reading in Excel files
library(readxl)
# For summary statistics
library(psych)
# For importing and exploring data
library(tidyverse)
# For reading in Excel files
library(readxl)
# For summary statistics
library(psych)
# For importing and exploring data
library(tidyverse)
# For reading in Excel files
library(readxl)
# For summary statistics
library(psych)
# For importing and exploring data
library(tidyverse)
# For reading in Excel files
library(readxl)
# For summary statistics
library(psych)
?c
a <- 1
is.vector(a)
my_char <- 'Hello, world'
toupper(my_char)
is.vector(my_number)
my_number <- 8.2
sqrt(my_number)
is.vector(my_number)
my_numbers <- c(5, 8, 2, 7)
str(my_numbers)
typeof(my_numbers)
is.vector(my_numbers)
is.vector(my_numbers)
typeof(my_numbers)
length(my_number)
is.vector(my_numbers)
typeof(my_numbers)
length(my_numbers)
sqrt(my_numbers)
roster_names <- c('Jack', 'Jill', 'Billy', 'Susie', 'Johnny')
toupper(roster_names)
my_vec <- c('A', 2, 'C')
my_vec
typeof(my_vec)
my_vec <- c('A', 2, 'C')
my_vec
typeof(my_vec)
roster_names <- c('Jack', 'Jill', 'Billy', 'Susie', 'Johnny')
# Get third element of roster_names vector
roster_names[3]
# Get get first through third elements
roster_names[1:3]
length(roster_names)
# Get second through last elements
roster_names[2:length(roster_names)]
# Get second and fifth elements
roster_names[c(2, 4)]
# Get second and fifth elements
roster_names[c(2, 4)]
# Get second and fifth elements
roster_names[c(2, 4)]
# Get second and fifth elements
roster_names[c(2, 5)]
# Get second and fifth elements
roster_names[c(2, 5)]
# Get second and fifth elements
roster_names[c(2, 5)]
# Get second and fifth elements
roster_names[c(2, 5)]
# Get second and fifth elements
roster_names[c(2, 5)]
# View listing of available datasets
data()
airquality
ChickWeight
sunspots
Titanic
ToothGrowth
str(iris)
glimpse(iris)
dplyr;:glimpse(iris)
dplyr::glimpse(iris)
is.data.frame(iris)
install.packages('Lahman')
?Lahman
library(Lahman)
?Lahman
data(package = 'Lahman')
mtcars
data()
library(tidyverse)
getwd
getwd()
library(tidyverse)
mpg <- read_csv('https://raw.githubusercontent.com/mwaskom/seaborn-data/master/mpg.csv')
mpg_split <- split(mpg, mpg$origin)
# Check the home directory for these files
ws_counter <- 1
for(ws in mpg_split){
write_csv(ws, file = paste0(names(mpg_split)[ws_counter],'.xlsx'))
ws_counter <- ws_counter + 1}
library(tidyverse)
mpg <- read_csv('https://raw.githubusercontent.com/mwaskom/seaborn-data/master/mpg.csv')
mpg_split <- split(mpg, mpg$origin)
# Check the home directory for these files
ws_counter <- 1
for(ws in mpg_split){
write_csv(ws, file = paste0(names(mpg_split)[ws_counter],'.csv'))
ws_counter <- ws_counter + 1}
library(tidyverse)
mpg <- read_csv('https://raw.githubusercontent.com/mwaskom/seaborn-data/master/mpg.csv')
mpg_split <- split(mpg, mpg$origin)
# Check the home directory for these files
ws_counter <- 1
for(ws in mpg_split){
write_csv(ws, paste0(names(mpg_split)[ws_counter],'.csv'))
ws_counter <- ws_counter + 1}
mpg %>%
nest(-origin) %>%
pwalk(~write_csv(x = .y, path = paste0(.x, ".csv") ) )
library(gapminder)
install.packages('gapminder')
library(gapminder)
gapminder %>%
nest(-country) %>%
pwalk(~write_csv(x = .y, path = paste0(.x, ".csv") ) )
mpg %>%
nest(-origin) %>%
pwalk(~write_csv(x = .y, path = paste0(.x, ".csv") ) )
?pwalk
?nest
?pwalk
options(width=80)
library(psych)
library(Ecdat)
describe(Housing)
library(psych)
library(Ecdat)
describe(Housing)
library(tidyverse)
?tidyr
library(tidyverse)
library(readxl)
star <- read_excel("datasets/star/star.xlsx")
head(star)
# Select given columns from star
select(star, tmathssk,treadssk,schidkn)
star_selected <- select(star, tmathssk,treadssk,schidkn)
head(star_selected)
select(star, -tmathssk, -treadssk, -schidkn)
select(star, -c(tmathssk, treadssk, schidkn))
# Select all columns between tmathssk and totexpk;
# Re-assign results back to star
star <- select(star, tmathssk:totexpk)
head(star)
# Calculate total score, months of experience
mutate(star, score_ttl = tmathssk+treadssk, months_exp = totexpk*12)
# Rename tmathssk and treadssk as
# math_score and reading_score, respectively
rename(star, math_score=tmathssk, reading_score=treadssk)
# Sort
arrange(star, classk)
# Filter
filter(star, classk == 'small.class')
filter(star, treadssk >= 500)
filter(star, classk == 'small.class' & treadssk >= 500)
# Group by
star_grouped <- group_by(star, classk)
head(star_grouped)
# Average math score by class size
summarize(star_grouped, avg_math = mean(tmathssk))
?summarise
# Read in our data sets
star <- read_excel('datasets/star/star.xlsx')
head(star)
districts <- read_csv('datasets/star/districts.csv')
head(districts)
# Left outer join star on districts
left_join(star, districts)
# Get the average reading score
# by class type, sorted high to low
star_grouped <- group_by(star, classk)
star_avg_reading <- summarize(star_grouped, avg_reading = mean(treadssk))
star_avg_reading_sorted <- arrange(star_avg_reading, desc(avg_reading))
star_avg_reading_sorted
# Piping %>%
# Get the average reading score
# by class type, sorted high to low
star %>%
group_by(classk) %>%
summarise(avg_reading = mean(treadssk)) %>%
arrange(desc(avg_reading))
# Average math and reading score
# for each school district
star %>%
group_by(schidkn) %>%
summarise(avg_read = mean(treadssk), avg_math = mean(tmathssk)) %>%
arrange(schidkn) %>%
head()
setwd("~/GitHub/advancing-into-analytics-book")
library(tidyverse)
library(readxl)
star <- read_excel("datasets/star/star.xlsx")
head(star)
# Select given columns from star
select(star, tmathssk,treadssk,schidkn)
star_selected <- select(star, tmathssk,treadssk,schidkn)
head(star_selected)
select(star, -tmathssk, -treadssk, -schidkn)
select(star, -c(tmathssk, treadssk, schidkn))
# Select all columns between tmathssk and totexpk;
# Re-assign results back to star
star <- select(star, tmathssk:totexpk)
head(star)
# Calculate total score, months of experience
mutate(star, score_ttl = tmathssk+treadssk, months_exp = totexpk*12)
# Rename tmathssk and treadssk as
# math_score and reading_score, respectively
rename(star, math_score=tmathssk, reading_score=treadssk)
# Sort
arrange(star, classk)
# Filter
filter(star, classk == 'small.class')
filter(star, treadssk >= 500)
filter(star, classk == 'small.class' & treadssk >= 500)
# Group by
star_grouped <- group_by(star, classk)
head(star_grouped)
# Average math score by class size
summarize(star_grouped, avg_math = mean(tmathssk))
?summarise
# Read in our data sets
star <- read_excel('datasets/star/star.xlsx')
head(star)
districts <- read_csv('datasets/star/districts.csv')
head(districts)
# Left outer join star on districts
left_join(star, districts)
# Get the average reading score
# by class type, sorted high to low
star_grouped <- group_by(star, classk)
star_avg_reading <- summarize(star_grouped, avg_reading = mean(treadssk))
star_avg_reading_sorted <- arrange(star_avg_reading, desc(avg_reading))
star_avg_reading_sorted
# Piping %>%
# Get the average reading score
# by class type, sorted high to low
star %>%
group_by(classk) %>%
summarise(avg_reading = mean(treadssk)) %>%
arrange(desc(avg_reading))
# Average math and reading score
# for each school district
star %>%
group_by(schidkn) %>%
summarise(avg_read = mean(treadssk), avg_math = mean(tmathssk)) %>%
arrange(schidkn) %>%
head()
star
star <- select(star, c('schidkn', 'treadssk', 'tmathssk'))
star <- mutate(star, id = row_number())
star_long <- pivot_longer(data = star,
cols = 'tmathssk':'treadssk',
names_to = 'test_type', values_to = 'score')
# https://stackoverflow.com/questions/38088328/how-to-recode-and-reverse-code-variables-in-columns-with-dplyr
star_long <- star_long %>%
mutate(test_type = recode(test_type,
'tmathssk' = 'math', 'treadssk' = 'reading'))
star_long
# Set up
star_pivot <- star %>%
select(c(schidkn, treadssk, tmathssh)) %>%
mutate(id = row_number())
star_pivot <- star %>%
select(c(schidkn, treadssk, tmathssh)) %>%
mutate(id = row_number())
# Set up
star_pivot <- star %>%
select(c(schidkn, treadssk, tmathssk)) %>%
mutate(id = row_number())
star_long <- star %>%
pivot_longer(cols = c(tmathssk, treadssk),
names_to = test_type, values_to = score)
star_long <- star %>%
pivot_longer(cols = c(tmathssk, treadssk),
names_to = 'test_type', values_to = 'score')
star_long <- star %>%
pivot_longer(cols = c(tmathssk, treadssk),
names_to = 'test_type', values_to = 'score')
head(star_long)
star_long <- star %>%
pivot_longer(cols = c(tmathssk, treadssk),
names_to = 'test_type', values_to = 'score')
head(star_long)
star_long <- star_long %>%
mutate(test_type = recode(test_type,
tmathssk = 'math', treadssk = reading))
star_long <- star_long %>%
mutate(test_type = recode(test_type,
'tmathssk' = 'math', 'treadssk' = 'reading'))
star_long
star_wide <- star_long %>%
pivot_wider(names_from = 'test_type', values_from = 'score')
head(star_wide)
star_wide <- star_long %>%
pivot_wider(names_from = 'test_type', values_from = 'score') %>%
select(-id)
head(star_wide)
star_long <- star %>%
pivot_longer(cols = c(tmathssk, treadssk),
values_to = 'score', names_to = 'test_type')
head(star_long)
?row_number()
# Rename tmathssk and treadssk as math and reading
star_long <- star_long %>%
mutate(test_type = recode(test_type,
'tmathssk' = 'math', 'treadssk' = 'reading'))
head(star_long)
star_wide <- star_long %>%
pivot_wider(values_from = 'score', names_from = 'test_type')
head(star_wide)
distinct(star_long, test_type)
# Rename tmathssk and treadssk as math and reading
star_long <- star_long %>%
mutate(test_type = recode(test_type,
'tmathssk' = 'math', 'treadssk' = 'reading'))
distinct(star_long, test_type)
